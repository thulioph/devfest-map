!function(){"use strict";angular.module("devFestAppApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial"]).config(["$routeProvider",function(a){a.when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/",{templateUrl:"views/map.html",controller:"MapCtrl",controllerAs:"map"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("devFestAppApp").constant("ApiConfig",{API_URL:"http://jsonplaceholder.typicode.com/users",API_LOCAL:"scripts/markers/data.json"})}(),function(){"use strict";function a(a){function b(){d.map_data=a.query()}function c(b){d.speaker=a.get({user:b})}var d;d=this,d.getSpeakerById=c,b()}angular.module("devFestAppApp").controller("MainCtrl",a),a.$inject=["MapService"]}(),angular.module("devFestAppApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),function(){"use strict";function a(a,b){var c,d;return c=b.API_LOCAL,d=a(c+"/:user",{user:"@user"})}angular.module("devFestAppApp").factory("MapService",a),a.$inject=["$resource","ApiConfig"]}(),function(){"use strict";function a(a,b,c,d){function e(){console.info("Building map...");var a,c,d,e;n.directionsService=new google.maps.DirectionsService,n.directionsDisplay=new google.maps.DirectionsRenderer,n.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0}),e={lat:-12.9080817,lng:-39.2652199},a=new google.maps.LatLng(e.lat,e.lng),c=document.getElementById("map-container"),d={center:a,zoom:3,mapTypeControl:!1,panControl:!1,streetViewControl:!1,zoomControl:!0,scrollwheel:!1,draggable:!0,zIndex:10,title:"Você está aqui",zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_BOTTOM}},n.map=new google.maps.Map(c,d),n.directionsDisplay.setMap(n.map),n.bounds=new google.maps.LatLngBounds,b.$emit("map_is_ok",n.map)}function f(){console.info("Get markers...");var c;n.markers_geo=[],c=a.query(),c.$promise.then(function(a){angular.forEach(a,function(a){n.markers_geo.push({geo:a.location.geo,id:a.id,name:a.name,icon:{url:a.photo},data:{name:a.name,company:a.company,bio:a.bio,social:a.social,url:"../images/thumbs/"+a.id+".png"}})}),b.$emit("markers_is_ok")})}function g(){console.info("Add markers into map...");var a,c;angular.forEach(n.markers_geo,function(b){c={position:new google.maps.LatLng(b.geo.lat,b.geo.lng),map:n.map,clickable:!0,title:b.name,zIndex:b.id,icon:{url:"../images/thumbs/"+b.icon.url+".png",origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,15),scaledSize:new google.maps.Size(40,40)},data:b.data},a=new google.maps.Marker(c),n.bounds.extend(new google.maps.LatLng(b.geo.lat,b.geo.lng)),n.map.fitBounds(n.bounds),google.maps.event.addListener(a,"click",n._clickedMarker(a,b))}),i(n.directionsService,n.directionsDisplay),b.$emit("map_markers_ok")}function h(a,d){return function(){n.marker_info=d,b.$apply(n.marker_info),n.map.panTo(a.position),c("left").toggle()}}function i(a,b){var c,d,e,f,g;c=[],d=n.markers_geo,e=d.shift(),f=d.pop(),g={origin:e.data.bio,destination:f.data.bio};for(var h=0;h<d.length;h++)c.push({location:new google.maps.LatLng(d[h].geo.lat,d[h].geo.lng),stopover:!0});g.waypts=c,n.displaRoute(a,g)}function j(a,b){a.route({origin:b.origin,destination:b.destination,waypoints:b.waypts,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING},function(a,b){b===google.maps.DirectionsStatus.OK?n.directionsDisplay.setDirections(a):console.warn("Directions request failed due to "+b)})}function k(){console.warn("=== MAP AND MARKERS ARE OK ===")}function l(){c("right").toggle().then(function(){d.debug("toggle right is done")})}function m(){c("left").close().then(function(){d.debug("close RIGHT is done")})}var n;n=this,n.getMarkers=f,n.addMarkers=g,n.buildAll=k,n._clickedMarker=h,n.toggleRight=l,n.close=m,n.displaRoute=j,n.getMarkers=f(),e(),b.$on("map_is_ok",n.getMarkers),b.$on("markers_is_ok",n.addMarkers),b.$on("map_markers_ok",n.buildAll)}angular.module("devFestAppApp").controller("MapCtrl",a),a.$inject=["MapService","$scope","$mdSidenav","$log"]}(),angular.module("devFestAppApp").run(["$templateCache",function(a){"use strict";a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row marketing"> <aside class="col-sm-6"> <ul> <li ng-repeat="p in main.map_data"> <h5>{{p.name}}</h5> <p>{{p.username}}</p> <button ng-click="main.getSpeakerById(p.id)" class="btn btn-info">Info</button> </li> </ul> </aside> <aside class="col-sm-6"> <div ng-if="main.speaker" class="alert alert-info"> {{main.speaker}} </div> </aside> </div>'),a.put("views/map.html",'<md-content flex layout-padding> <div layout="column" layout-fill layout-align="top center"> <aside class="map-container" id="map-container"></aside> </div> </md-content> <md-sidenav class="md-sidenav-left md-whiteframe-4dp" md-component-id="left"> <md-card> <img ng-src="{{map.marker_info.data.url}}" class="md-card-image" alt="{{map.marker_info.data.name}}"> <md-button ng-click="map.close()" class="md-primary">close</md-button> <md-card-title> <md-card-title-text> <span class="md-headline">{{map.marker_info.data.name}}</span> </md-card-title-text> </md-card-title> <md-card-content> <p> {{map.marker_info.data.bio}} </p> <p> {{map.marker_info.data.company}} </p> </md-card-content> <md-card-actions layout="row" layout-align="end center"> <md-button target="_blank" ng-href="{{map.marker_info.data.social.twitter}}">Twitter</md-button> <md-button target="_blank" ng-href="{{map.marker_info.data.social.facebook}}">Facebook</md-button> <md-button target="_blank" ng-href="{{map.marker_info.data.social.linkedin}}">Linkedin</md-button> </md-card-actions> </md-card> </md-sidenav>')}]);